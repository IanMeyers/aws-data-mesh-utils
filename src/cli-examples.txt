export AWS_REGION=<my default region>
export CREDS_FILE=<my credentials file>
export DATA_MESH_ACCOUNT=887210671223
export PRODUCER_ACCOUNT=600214582022
export CONSUMER_ACCOUNT=206160724517

# install the data mesh governance objects into the mesh account using credentials specified inline
./data-mesh-cli install-mesh-objects --data_mesh_account_id $DATA_MESH_ACCOUNT  --region_name $AWS_REGION --use_credentials "{\"AccessKeyId\":\"my access key\",\"SecretAccessKey\":\"my secret key\"}"

# install the data mesh governance objects driven by the credentials file which includes region and mesh account details
./data-mesh-cli install-mesh-objects --credentials_file $CREDS_FILE

# bootstrap an account as a producer
./data-mesh-cli enable-account --account_type producer --credentials_file $CREDS_FILE

# bootstrap an account as a consumer
./data-mesh-cli enable-account --account_type consumer --credentials_file $CREDS_FILE

# create a new data product for a table
./data-mesh-cli create-data-product --data_mesh_account_id $DATA_MESH_ACCOUNT  --region_name $AWS_REGION --use_credentials "{\"AccessKeyId\":\"my access key\",\"SecretAccessKey\":\"my secret key\"}" --source_database_name <database> --table_name_regex <table name or pattern>
./data-mesh-cli create-data-product --credentials_file $CREDS_FILE  --source_database_name tpcds --table_name_regex web_sales

# as a consumer, ask for access to that product
./data-mesh-cli request-access --data_mesh_account_id $DATA_MESH_ACCOUNT  --region_name $AWS_REGION --use_credentials "{\"AccessKeyId\":\"my access key\",\"SecretAccessKey\":\"my secret key\"}" --owner-account-id $PRODUCER_ACCOUNT --database_name <database> --tables <table1, table2, table3> --request-permissions <permissions desired including SELECT, INSERT, UPDATE, DELETE, DROP, ALTER>
./data-mesh-cli request-access --credentials_file $CREDS_FILE --owner-account-id $PRODUCER_ACCOUNT --database_name <database> --tables <table1, table2, table3> --request-permissions <permissions desired including SELECT, INSERT, UPDATE, DELETE, DROP, ALTER>

./data-mesh-cli approve-subscription
./data-mesh-cli deny-subscription
./data-mesh-cli modify-subscription

./data-mesh-cli import-subscription
./data-mesh-cli list-subscriptions

